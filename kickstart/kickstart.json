{
  "variables": {
    "apiKey": "33052c8a-c283-4e96-9d2a-eb1215c69f8f-not-for-prod",
    "asymmetricKeyId": "#{UUID()}",
    "clientSecret": "super-secret-secret-that-should-be-regenerated-for-production",
    "defaultTenantId": "d7d09513-a3f5-401c-9685-34ab6c552453",
    "adminEmail": "admin@example.com",
    "adminPassword": "password",
    "adminUserId": "00000000-0000-0000-0000-000000000001",
    "apiTypeEntityTypeId": "e2aa0532-c72c-4267-9884-07c5c70b2001",
    "radioEntityTypeId": "2bf5353e-cb6d-46ba-ba38-77e43a1c764f",
    "apiEntityId": "dc99eb28-006c-480e-9854-f2d68cd72dcb",
    "radioEntityId": "f1ae8766-a4d8-4a92-acb6-869e47e9f38e",
    "radioEntitySecret": "qEbs2ssy3qoOqSaMYRCEUgvlqUdwOzajEaFScGjg",
    "issuerURL": "http://localhost:9011"

  },
  "apiKeys": [
    {
      "key": "#{apiKey}",
      "description": "Unrestricted API key"
    }
  ],
  "licenseId": "LICENSE ID",
  "requests": [
    {
      "method": "POST",
      "url": "/api/key/generate/#{asymmetricKeyId}",
      "tenantId": "#{defaultTenantId}",
      "body": {
        "key": {
          "algorithm": "RS256",
          "name": "For tenant",
          "length": 2048
        }
      }
    },
    {
      "method": "PATCH",
      "url": "/api/tenant/#{defaultTenantId}",
      "body": {
        "tenant": {
          "jwtConfiguration" : {
            "accessTokenKeyId": "#{asymmetricKeyId}"
          },
          "issuer": "#{issuerURL}"
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/user/registration/#{adminUserId}",
      "body": {
        "registration": {
          "applicationId": "#{FUSIONAUTH_APPLICATION_ID}",
          "roles": [
            "admin"
          ]
        },
        "roles": [
          "admin"
        ],
        "skipRegistrationVerification": true,
        "user": {
          "birthDate": "1981-06-04",
          "data": {
            "favoriteColor": "chartreuse"
          },
          "email": "#{adminEmail}",
          "firstName": "Admin",
          "lastName": "Example",
          "password": "#{adminPassword}"
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/entity/type/#{radioEntityTypeId}",
      "body": {
        "entityType": {
          "name": "ClockRadio"
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/entity/type/#{apiTypeEntityTypeId}",
      "body": {
        "entityType": {
          "name": "APIType"
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/entity/type/#{apiTypeEntityTypeId}/permission",
      "body": {
        "permission": {
          "name": "news"
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/entity/type/#{apiTypeEntityTypeId}/permission",
      "body": {
        "permission": {
          "name": "weather"
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/entity/#{apiEntityId}",
      "body": {
        "entity": {
          "name": "API",
          "type": {
            "id": "#{apiTypeEntityTypeId}"
          }
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/entity/#{radioEntityId}",
      "body": {
        "entity": {
          "name": "One clock radio",
          "clientSecret": "#{radioEntitySecret}",
          "type": {
            "id": "#{radioEntityTypeId}"
          }
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/entity/#{apiEntityId}/grant",
      "body": {
        "grant": {
          "permissions": ["news"],
          "recipientEntityId": "#{radioEntityId}"
        }
      }
    }
  ]
}
